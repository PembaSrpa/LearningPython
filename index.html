<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Instagram Follower Analyzer - Manual Input</title>
		<script
			crossorigin
			src="https://unpkg.com/react@18/umd/react.development.js"></script>
		<script
			crossorigin
			src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					"Helvetica Neue", Arial, sans-serif;
				background: linear-gradient(
					135deg,
					#405de6 0%,
					#5851db 25%,
					#833ab4 50%,
					#c13584 75%,
					#e1306c 100%
				);
				min-height: 100vh;
				color: #333;
				line-height: 1.6;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 20px;
			}

			.header {
				text-align: center;
				color: white;
				margin-bottom: 40px;
				padding: 20px 0;
			}

			.header h1 {
				font-size: 2.5rem;
				margin-bottom: 10px;
				font-weight: 700;
			}

			.header p {
				font-size: 1.2rem;
				opacity: 0.9;
			}

			.main-card {
				background: white;
				border-radius: 20px;
				padding: 40px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
				margin-bottom: 30px;
			}

			.instructions {
				background: linear-gradient(135deg, #f8f9ff 0%, #e8f4f8 100%);
				border-radius: 15px;
				padding: 30px;
				margin-bottom: 30px;
				border-left: 5px solid #405de6;
			}

			.instructions h2 {
				color: #405de6;
				margin-bottom: 20px;
				font-size: 1.5rem;
			}

			.step {
				display: flex;
				align-items: flex-start;
				margin-bottom: 15px;
				padding: 15px;
				background: white;
				border-radius: 10px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
			}

			.step-number {
				background: #405de6;
				color: white;
				width: 30px;
				height: 30px;
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				font-weight: bold;
				margin-right: 15px;
				flex-shrink: 0;
			}

			.step-content {
				flex: 1;
			}

			.step-title {
				font-weight: 600;
				color: #333;
				margin-bottom: 5px;
			}

			.step-desc {
				color: #666;
				font-size: 0.9rem;
			}

			.input-section {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 30px;
				margin-bottom: 30px;
			}

			.input-group {
				background: #f8f9fa;
				border-radius: 15px;
				padding: 25px;
				border: 2px solid #e1e8ed;
				transition: border-color 0.3s ease;
			}

			.input-group:hover {
				border-color: #405de6;
			}

			.input-group.focused {
				border-color: #405de6;
				box-shadow: 0 0 0 3px rgba(64, 93, 230, 0.1);
			}

			.input-label {
				display: flex;
				align-items: center;
				margin-bottom: 15px;
				font-weight: 600;
				color: #333;
				font-size: 1.1rem;
			}

			.input-icon {
				margin-right: 10px;
				font-size: 1.2rem;
			}

			.input-count {
				margin-left: auto;
				background: #405de6;
				color: white;
				padding: 4px 12px;
				border-radius: 20px;
				font-size: 0.8rem;
				font-weight: 500;
			}

			.textarea {
				width: 100%;
				min-height: 200px;
				padding: 15px;
				border: 2px solid #e1e8ed;
				border-radius: 10px;
				font-family: inherit;
				font-size: 14px;
				resize: vertical;
				transition: border-color 0.3s ease;
			}

			.textarea:focus {
				outline: none;
				border-color: #405de6;
			}

			.textarea::placeholder {
				color: #999;
				font-style: italic;
			}

			.hint-text {
				font-size: 0.85rem;
				color: #666;
				margin-top: 10px;
				background: white;
				padding: 10px;
				border-radius: 8px;
				border-left: 3px solid #405de6;
			}

			.action-buttons {
				display: flex;
				gap: 15px;
				justify-content: center;
				margin-bottom: 30px;
			}

			.btn {
				padding: 15px 30px;
				border: none;
				border-radius: 25px;
				font-size: 1rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
				text-decoration: none;
				display: inline-flex;
				align-items: center;
				gap: 8px;
			}

			.btn-primary {
				background: linear-gradient(135deg, #405de6 0%, #5851db 100%);
				color: white;
			}

			.btn-primary:hover {
				transform: translateY(-2px);
				box-shadow: 0 10px 25px rgba(64, 93, 230, 0.3);
			}

			.btn-secondary {
				background: white;
				color: #405de6;
				border: 2px solid #405de6;
			}

			.btn-secondary:hover {
				background: #405de6;
				color: white;
			}

			.btn:disabled {
				opacity: 0.6;
				cursor: not-allowed;
				transform: none;
			}

			.results-section {
				background: white;
				border-radius: 20px;
				padding: 30px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
				margin-top: 20px;
			}

			.stats-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 20px;
				margin-bottom: 30px;
			}

			.stat-card {
				background: linear-gradient(135deg, #f8f9ff 0%, #e8f4f8 100%);
				padding: 25px;
				border-radius: 15px;
				text-align: center;
				border: 2px solid #e1e8ed;
			}

			.stat-number {
				font-size: 2.5rem;
				font-weight: 700;
				color: #405de6;
				margin-bottom: 5px;
			}

			.stat-label {
				color: #666;
				font-size: 0.9rem;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.results-list {
				background: #f8f9fa;
				border-radius: 15px;
				padding: 25px;
				max-height: 400px;
				overflow-y: auto;
			}

			.results-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 20px;
			}

			.results-title {
				font-size: 1.3rem;
				font-weight: 600;
				color: #333;
			}

			.user-item {
				display: flex;
				align-items: center;
				padding: 15px;
				background: white;
				border-radius: 10px;
				margin-bottom: 10px;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
			}

			.user-avatar {
				width: 45px;
				height: 45px;
				border-radius: 50%;
				background: linear-gradient(135deg, #405de6 0%, #c13584 100%);
				display: flex;
				align-items: center;
				justify-content: center;
				color: white;
				font-weight: bold;
				font-size: 1.1rem;
				margin-right: 15px;
			}

			.user-info {
				flex: 1;
			}

			.user-name {
				font-weight: 600;
				color: #333;
				margin-bottom: 2px;
			}

			.user-status {
				color: #666;
				font-size: 0.85rem;
			}

			.error-message {
				background: #fee;
				color: #c33;
				padding: 15px;
				border-radius: 10px;
				margin: 15px 0;
				border-left: 4px solid #c33;
			}

			.success-message {
				background: #efe;
				color: #363;
				padding: 15px;
				border-radius: 10px;
				margin: 15px 0;
				border-left: 4px solid #363;
			}

			.empty-state {
				text-align: center;
				color: #666;
				padding: 40px;
				background: white;
				border-radius: 10px;
				margin-top: 20px;
			}

			.empty-state-icon {
				font-size: 3rem;
				margin-bottom: 15px;
				opacity: 0.5;
			}

			@media (max-width: 768px) {
				.input-section {
					grid-template-columns: 1fr;
				}

				.header h1 {
					font-size: 2rem;
				}

				.main-card {
					padding: 20px;
				}

				.action-buttons {
					flex-direction: column;
					align-items: stretch;
				}

				.stats-grid {
					grid-template-columns: 1fr;
				}
			}
		</style>
	</head>
	<body>
		<div id="root"></div>

		<script type="text/babel">
			const { useState, useEffect, useRef } = React;

			function App() {
				const [followersText, setFollowersText] = useState("");
				const [followingText, setFollowingText] = useState("");
				const [results, setResults] = useState(null);
				const [error, setError] = useState("");
				const [success, setSuccess] = useState("");
				const [focusedInput, setFocusedInput] = useState(null);

				const followersRef = useRef(null);
				const followingRef = useRef(null);

				// Parse usernames from text input (one per line, clean up)
				const parseUsernames = (text) => {
					return text
						.split("\n")
						.map((line) => line.trim())
						.filter((line) => line.length > 0)
						.map((line) => line.replace(/^@/, "")) // Remove @ if present
						.filter((username) => username.length > 0);
				};

				// Count usernames for display
				const followersCount = parseUsernames(followersText).length;
				const followingCount = parseUsernames(followingText).length;

				// Analyze followers and following to find non-mutual follows
				const analyzeFollowers = () => {
					setError("");
					setSuccess("");

					try {
						const followers = parseUsernames(followersText);
						const following = parseUsernames(followingText);

						if (followers.length === 0 || following.length === 0) {
							setError("Please enter both followers and following lists");
							return;
						}

						// Convert to sets for faster lookup
						const followersSet = new Set(followers.map((u) => u.toLowerCase()));
						const followingSet = new Set(following.map((u) => u.toLowerCase()));

						// Find users you follow who don't follow you back
						const nonMutual = following.filter(
							(user) => !followersSet.has(user.toLowerCase())
						);

						// Find mutual followers
						const mutual = following.filter((user) =>
							followersSet.has(user.toLowerCase())
						);

						setResults({
							totalFollowers: followers.length,
							totalFollowing: following.length,
							nonMutualFollows: nonMutual,
							mutualFollows: mutual,
							nonMutualCount: nonMutual.length,
						});

						setSuccess(
							`Analysis complete! Found ${nonMutual.length} non-mutual follows.`
						);
					} catch (err) {
						setError("Error analyzing data. Please check your input format.");
						console.error(err);
					}
				};

				// Export results to CSV
				const exportToCSV = () => {
					if (!results || results.nonMutualFollows.length === 0) {
						setError("No data to export");
						return;
					}

					try {
						// Create CSV content
						const csvContent = [
							["Username", "Status", "Date"],
							...results.nonMutualFollows.map((username) => [
								username,
								"Not following back",
								new Date().toLocaleDateString(),
							]),
						]
							.map((row) => row.map((field) => `"${field}"`).join(","))
							.join("\n");

						// Create and download file
						const blob = new Blob([csvContent], { type: "text/csv" });
						const url = URL.createObjectURL(blob);
						const a = document.createElement("a");
						a.href = url;
						a.download = `non_mutual_follows_${
							new Date().toISOString().split("T")[0]
						}.csv`;
						a.click();
						URL.revokeObjectURL(url);

						setSuccess("CSV exported successfully!");
					} catch (err) {
						setError("Error exporting CSV");
						console.error(err);
					}
				};

				// Clear all data
				const clearData = () => {
					setFollowersText("");
					setFollowingText("");
					setResults(null);
					setError("");
					setSuccess("");
				};

				return (
					<div className="container">
						<div className="header">
							<h1>üìä Instagram Follower Analyzer</h1>
							<p>Find who you follow that doesn't follow you back</p>
						</div>

						<div className="main-card">
							{/* Instructions */}
							<div className="instructions">
								<h2>üìù How to Use</h2>
								<div className="step">
									<div className="step-number">1</div>
									<div className="step-content">
										<div className="step-title">
											Go to your Instagram profile
										</div>
										<div className="step-desc">
											Open Instagram and navigate to your profile page
										</div>
									</div>
								</div>
								<div className="step">
									<div className="step-number">2</div>
									<div className="step-content">
										<div className="step-title">Copy your followers list</div>
										<div className="step-desc">
											Click "followers" ‚Üí Select all usernames ‚Üí Copy and paste
											in the left box
										</div>
									</div>
								</div>
								<div className="step">
									<div className="step-number">3</div>
									<div className="step-content">
										<div className="step-title">Copy your following list</div>
										<div className="step-desc">
											Click "following" ‚Üí Select all usernames ‚Üí Copy and paste
											in the right box
										</div>
									</div>
								</div>
								<div className="step">
									<div className="step-number">4</div>
									<div className="step-content">
										<div className="step-title">Analyze and export</div>
										<div className="step-desc">
											Click "Analyze" to see results, then "Export CSV" to save
											the data
										</div>
									</div>
								</div>
							</div>

							{/* Input Section */}
							<div className="input-section">
								<div
									className={`input-group ${
										focusedInput === "followers" ? "focused" : ""
									}`}>
									<div className="input-label">
										<span className="input-icon">üë•</span>
										Followers
										<span className="input-count">{followersCount}</span>
									</div>
									<textarea
										ref={followersRef}
										className="textarea"
										value={followersText}
										onChange={(e) => setFollowersText(e.target.value)}
										onFocus={() => setFocusedInput("followers")}
										onBlur={() => setFocusedInput(null)}
										placeholder="Paste your followers list here...&#10;username1&#10;username2&#10;username3"
									/>
									<div className="hint-text">
										üí° Tip: One username per line. You can include or exclude @
										symbols.
									</div>
								</div>

								<div
									className={`input-group ${
										focusedInput === "following" ? "focused" : ""
									}`}>
									<div className="input-label">
										<span className="input-icon">‚ûï</span>
										Following
										<span className="input-count">{followingCount}</span>
									</div>
									<textarea
										ref={followingRef}
										className="textarea"
										value={followingText}
										onChange={(e) => setFollowingText(e.target.value)}
										onFocus={() => setFocusedInput("following")}
										onBlur={() => setFocusedInput(null)}
										placeholder="Paste your following list here...&#10;username1&#10;username2&#10;username3"
									/>
									<div className="hint-text">
										üí° Tip: Copy this from your "following" list on Instagram.
									</div>
								</div>
							</div>

							{/* Action Buttons */}
							<div className="action-buttons">
								<button
									className="btn btn-primary"
									onClick={analyzeFollowers}
									disabled={followersCount === 0 || followingCount === 0}>
									üîç Analyze Followers
								</button>
								<button className="btn btn-secondary" onClick={clearData}>
									üóëÔ∏è Clear All
								</button>
							</div>

							{/* Messages */}
							{error && <div className="error-message">{error}</div>}
							{success && <div className="success-message">{success}</div>}
						</div>

						{/* Results Section */}
						{results && (
							<div className="results-section">
								<div className="stats-grid">
									<div className="stat-card">
										<div className="stat-number">{results.totalFollowers}</div>
										<div className="stat-label">Total Followers</div>
									</div>
									<div className="stat-card">
										<div className="stat-number">{results.totalFollowing}</div>
										<div className="stat-label">Total Following</div>
									</div>
									<div className="stat-card">
										<div className="stat-number">{results.nonMutualCount}</div>
										<div className="stat-label">Not Following Back</div>
									</div>
								</div>

								<div className="results-list">
									<div className="results-header">
										<h3 className="results-title">
											Users Not Following You Back ({results.nonMutualCount})
										</h3>
										{results.nonMutualCount > 0 && (
											<button className="btn btn-primary" onClick={exportToCSV}>
												üíæ Export CSV
											</button>
										)}
									</div>

									{results.nonMutualFollows.length > 0 ? (
										results.nonMutualFollows.map((username, index) => (
											<div key={index} className="user-item">
												<div className="user-avatar">
													{username.charAt(0).toUpperCase()}
												</div>
												<div className="user-info">
													<div className="user-name">@{username}</div>
													<div className="user-status">Not following back</div>
												</div>
											</div>
										))
									) : (
										<div className="empty-state">
											<div className="empty-state-icon">üéâ</div>
											<h3>Great news!</h3>
											<p>Everyone you follow is following you back!</p>
										</div>
									)}
								</div>
							</div>
						)}
					</div>
				);
			}

			const root = ReactDOM.createRoot(document.getElementById("root"));
			root.render(<App />);
		</script>
	</body>
</html>
